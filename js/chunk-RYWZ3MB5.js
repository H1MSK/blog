import{F as K,J as H,K as q,R as _,a as Z,c as x,f as $,g as D,h as z,i as B,k as L,m as N,n as ee,p as A,q as F}from"./chunk-IF423PAF.js";import{c as E}from"./chunk-UDRZ5ZGN.js";E(),E();var te=class{constructor(){this.queue=[]}add(e){return this.queue.push(new R(e)),this}play(){this.queue.forEach(e=>e.play())}},X={targets:null,duration:1/0,easing:"linear",delay:0,begin:null,update:null,complete:null},I=()=>{let e={linear:()=>n=>n},l={Sine:()=>n=>1-Math.cos(n*Math.PI/2),Circ:()=>n=>1-Math.sqrt(1-n*n),Back:()=>n=>n*n*(3*n-2),Bounce:()=>n=>{let o,s=4;for(;n<((o=Math.pow(2,--s))-1)/11;);return 1/Math.pow(4,3-s)-7.5625*Math.pow((o*3-2)/22-n,2)}};return["Quad","Cubic","Quart","Quint","Expo"].forEach((n,o)=>{l[n]=()=>s=>Math.pow(s,o+2)}),Object.keys(l).forEach(n=>{let o=l[n];e["easeIn"+n]=o,e["easeOut"+n]=()=>s=>1-o()(1-s),e["easeInOut"+n]=()=>s=>s<.5?o()(s*2)/2:1-o()(s*-2+2)/2,e["easeOutIn"+n]=()=>s=>s<.5?(1-o()(1-s*2))/2:(o()(s*2-1)+1)/2}),e},ae=["translateX","translateY","translateZ"],P=(e,l)=>e instanceof HTMLElement&&e.style&&"transform"in e.style&&ae.includes(l)?"transform":e instanceof HTMLElement&&e.style&&l in e.style?"style":"attribute",re=e=>{let l=Date.now()+e.delay,n=l+e.duration,o=!!e.targets,s=[],f=()=>{if(o){Array.isArray(e.targets)||(e.targets=[e.targets]);for(let m of e.targets){let h={};for(let v in e.dest){let y=e.dest[v];if(Array.isArray(y))if(y.length===2&&typeof y[0]!="object"){switch(P(m,v)){case"transform":typeof y[0]=="string"?m.style.transform=`${v}(${y[0]})`:m.style.transform=`${v}(${y[0]}px)`;break;case"style":m.style[v]=y[0];break;case"attribute":m[v]=y[0];break}h[v]=y[0],e.dest[v]=y[1]}else{let t=0;for(let a of y)a.startTimeStamp=t,t+=a.duration;h[v]=m[v]}else switch(P(m,v)){case"transform":let t=new RegExp(`${v}((w+))`,"g");h[v]=m.style.transform.match(t)[0];break;case"style":h[v]=m.style[v];break;case"attribute":h[v]=m[v]}}s.push(h)}}},d=(m,h,v,y,t,a=!1)=>{let r;if(typeof y=="string")if(y.endsWith("%"))r="%",y=parseFloat(y);else if(y.endsWith("px"))r="px",y=parseFloat(y);else throw new TypeError("string value must ends with '%' or 'px'");let c=a?y:(y-h)*v+h;switch(r&&(c+=r),P(m,t)){case"transform":r?m.style.transform=`${t}(${c})`:m.style.transform=`${t}(${c}px)`;break;case"style":m.style[t]=c;break;case"attribute":m[t]=c}},u=(m,h,v=!1)=>{e.targets.forEach((y,t)=>{Object.keys(e.dest).forEach(a=>{let r=parseFloat(s[t][a]),c=e.dest[a];if(typeof c=="object")if(Array.isArray(c)){let i=0;for(;i<c.length&&!(h-l<c[i].startTimeStamp);i++);let{value:p,duration:w,easing:k,startTimeStamp:b}=c[i-1];h<=l+w+b?(m=I()[k||e.easing]()((h-l)/w),d(y,r,m,p,a)):v&&d(y,r,m,p,a,v)}else{let{value:i,duration:p,easing:w}=c;h<=l+p?(m=I()[w||e.easing]()((h-l)/p),d(y,r,m,i,a)):v&&d(y,r,m,i,a,v)}else typeof c=="function"&&(c=c(y,t)),d(y,r,m,c,a,v)})})},g=()=>{let m=Date.now();if(m>n){u(1,m,!0),typeof e.complete=="function"&&e.complete(e.targets),e.isPlay=!1;return}if(m<l){requestAnimationFrame(g);return}let h=I()[e.easing]()((m-l)/e.duration);o&&u(h,m),typeof e.update=="function"&&e.update(e.targets),requestAnimationFrame(g)};f(),typeof e.begin=="function"&&e.begin(e.targets),g()},R=class{constructor(e=X){e=Object.assign({},X,e);let{targets:l,duration:n,easing:o,delay:s,begin:f,update:d,complete:u,...g}=e;this.targets=l,this.duration=n,this.easing=o,this.delay=s,this.begin=f,this.update=d,this.complete=u,this.dest=g||{},this.tl=null,this.isPlay=!1}timeline(){return this.tl===null&&(this.tl=new te),this.tl}play(){this.isPlay||(this.isPlay=!0,re(this))}},O=e=>new R(e);O.random=function(e,l){return Math.floor(Math.random()*(l-e+1))+e};var se=(e,l,n,o)=>{let s,f="none";switch(l){case 0:s={opacity:[1,0]};break;case 1:s={opacity:[0,1]},f="block";break;case"bounceUpIn":s={begin(d){L(e,"block")},translateY:[{value:-60,duration:200},{value:10,duration:200},{value:-5,duration:200},{value:0,duration:200}],opacity:[0,1]},f="block";break;case"shrinkIn":s={begin(d){L(e,"block")},scale:[{value:1.1,duration:300},{value:1,duration:200}],opacity:1},f="block";break;case"slideRightIn":s={begin(d){L(e,"block")},translateX:["100%","0%"],opacity:[0,1]},f="block";break;case"slideRightOut":s={translateX:["0%","100%"],opacity:[1,0]};break;default:s=l,f=l.display;break}O(Object.assign({targets:e,duration:200,easing:"linear",begin(){o&&o()},complete(){L(e,f),n&&n()}},s)).play()},C=(e,l,n)=>{O({targets:typeof l=="number"&&typeof e!="number"?e.parentNode:document.scrollingElement,duration:500,easing:"easeInOutQuad",scrollTop:l||(typeof e=="number"?e:e?z(e)+document.documentElement.scrollTop-K:0),complete(){n&&n()}}).play()};E(),E();var M={set(e,l){localStorage.setItem(e,l)},get(e){return localStorage.getItem(e)},del(e){localStorage.removeItem(e)}},J=e=>{if(!e)return;let l=x(F,"div",{innerHTML:e,className:"tip"});setTimeout(()=>{l.addClass("hide"),setTimeout(()=>{F.removeChild(l)},300)},3e3)},le=()=>{N.auto_scroll&&M.set(q,String(ee.y))},ne=e=>{let l=window.location.hash,n=null;if(H){M.del(q);return}l?n=document.querySelector(decodeURI(l)):n=N.auto_scroll?parseInt(M.get(q)):0,n&&(C(n),_(1)),e&&l&&!H&&(C(n),_(1))},ie=(e,l)=>{navigator.clipboard&&window.isSecureContext?navigator.clipboard.writeText(e).then(()=>{l&&l(!0)},()=>{l&&l(!1)}):(console.error("Too old browser, clipborad API not supported."),l&&l(!1))};E(),E();var Q=()=>{let e;Z.each("div.tab",l=>{if(l.getAttribute("data-ready"))return;let n=l.getAttribute("data-id"),o=l.getAttribute("data-title"),s=document.getElementById(n);s?e=!1:(s=document.createElement("div"),s.className="tabs",s.id=n,s.innerHTML='<div class="show-btn"></div>',s.querySelector(".show-btn").addEventListener("click",()=>{C(s)}),l.parentNode.insertBefore(s,l),e=!0);let f=s.querySelector(".nav ul");f||(f=x(s,"div",{className:"nav",innerHTML:"<ul></ul>"}).querySelector("ul"));let d=x(f,"li",{innerHTML:o});e&&(d.addClass("active"),l.addClass("active")),d.addEventListener("click",u=>{let g=u.currentTarget;s.find(".active").forEach(m=>{m.removeClass("active")}),l.addClass("active"),g.addClass("active")}),s.appendChild(l),l.setAttribute("data-ready",String(!0))})},S=null,j=/mobile/i.test(window.navigator.userAgent),oe=(e,l)=>{let n={el:{},create(){e.player.options.btns&&e.player.options.btns.forEach(t=>{n.el[t]||(n.el[t]=x(e,"div",{className:t+" btn",onclick(a){e.player.fetch().then(()=>{e.player.options.events[t](a)})}}))})}},o={el:null,btns:{mode:void 0,volume:void 0},step:"next",create:()=>{if(!e.player.options.controls)return;let t=o;e.player.options.controls.forEach(a=>{if(t.btns[a])return;let r={onclick(c){t.events[a]?t.events[a](c):e.player.options.events[a](c)}};switch(a){case"volume":r.className=" "+(d.muted?"off":"on"),r.innerHTML='<div class="bar"></div>',r["on"+h.nameMap.dragStart]=t.events.volume,r.onclick=null;break;case"mode":r.className=" "+e.player.options.mode;break;default:r.className="";break}r.className=a+r.className+" btn",t.btns[a]=x(t.el,"div",r)}),t.btns.volume.bar=t.btns.volume.querySelector(".bar")},events:{mode(t){switch(e.player.options.mode){case"loop":e.player.options.mode="random";break;case"random":e.player.options.mode="order";break;default:e.player.options.mode="loop"}o.btns.mode.className="mode "+e.player.options.mode+" btn",M.set("_PlayerMode",e.player.options.mode)},volume(t){t.preventDefault();let a=t.currentTarget,r=!1,c=p=>{p.preventDefault(),e.player.volume(o.percent(p,a)),r=!0},i=p=>{p.preventDefault(),a.removeEventListener(h.nameMap.dragEnd,i),a.removeEventListener(h.nameMap.dragMove,c),r?(e.player.muted(),e.player.volume(o.percent(p,a))):d.muted?(e.player.muted(),e.player.volume(d.volume)):(e.player.muted("muted"),o.update(0))};a.addEventListener(h.nameMap.dragMove,c),a.addEventListener(h.nameMap.dragEnd,i)},backward(t){o.step="prev",e.player.mode()},forward(t){o.step="next",e.player.mode()}},update(t){o.btns.volume.className="volume "+(!d.muted&&t>0?"on":"off")+" btn",$(o.btns.volume.bar,Math.floor(t*100)+"%")},percent(t,a){let r=((t.clientX||t.changedTouches[0].clientX)-B(a))/D(a);return r=Math.max(r,0),Math.min(r,1)}},s={el:null,bar:null,create(){let t=u.current().el;t&&(s.el&&(s.el.parentNode.removeClass("current").removeEventListener(h.nameMap.dragStart,s.drag),s.el.remove()),s.el=x(t,"div",{className:"progress"}),s.el.setAttribute("data-dtime",h.secondToTime(0)),s.bar=x(s.el,"div",{className:"bar"}),t.addClass("current"),t.addEventListener(h.nameMap.dragStart,s.drag),u.scroll())},update(t){$(s.bar,Math.floor(t*100)+"%"),s.el.setAttribute("data-ptime",h.secondToTime(t*d.duration))},seeking(t){t?s.el.addClass("seeking"):s.el.removeClass("seeking")},percent(t,a){let r=((t.clientX||t.changedTouches[0].clientX)-B(a))/D(a);return r=Math.max(r,0),Math.min(r,1)},drag(t){t.preventDefault();let a=u.current().el,r=i=>{i.preventDefault();let p=s.percent(i,a);s.update(p),v.update(p*d.duration)},c=i=>{i.preventDefault(),a.removeEventListener(h.nameMap.dragEnd,c),a.removeEventListener(h.nameMap.dragMove,r);let p=s.percent(i,a);s.update(p),e.player.seek(p*d.duration),d.disableTimeupdate=!1,s.seeking(!1)};d.disableTimeupdate=!0,s.seeking(!0),a.addEventListener(h.nameMap.dragMove,r),a.addEventListener(h.nameMap.dragEnd,c)}},f={el:null,create(){let t=u.current();f.el.innerHTML='<div class="cover"><div class="disc"><img src="'+t.cover+'" class="blur"  alt="music cover"/></div></div><div class="info"><h4 class="title">'+t.name+"</h4><span>"+t.artist+'</span><div class="lrc"></div></div>',f.el.querySelector(".cover").addEventListener("click",e.player.options.events["play-pause"]),v.create(f.el.querySelector(".lrc"))}},d,u={el:null,data:[],index:-1,errnum:0,add:(t,a)=>{a.forEach(r=>{r.group=t,r.name=r.name||r.title||"Meida name",r.artist=r.artist||r.author||"Anonymous",r.cover=r.cover||r.pic,r.type=r.type||"normal",u.data.push(r)})},clear(){u.data=[],u.el.innerHTML="",u.index!==-1&&(u.index=-1,e.player.fetch())},create(){let t=u.el;u.data.map((a,r)=>{if(a.el)return null;let c="list-"+e.player._id+"-"+a.group,i=document.getElementById(c);return i||(i=x(t,"div",{id:c,className:e.player.group?"tab":"",innerHTML:"<ol></ol>"}),e.player.group&&(i.setAttribute("data-title",e.player.options.rawList[a.group].title),i.setAttribute("data-id",e.player._id))),a.el=x(i.querySelector("ol"),"li",{title:a.name+" - "+a.artist,innerHTML:'<span class="info"><span>'+a.name+"</span><span>"+a.artist+"</span></span>",onclick(p){let w=p.currentTarget;if(u.index===r&&s.el){d.paused?e.player.play():e.player.seek(d.duration*s.percent(p,w));return}e.player.switch(r),e.player.play()}}),a}),Q()},current(){return this.data[this.index]},scroll(){let t=this.current(),a=this.el.querySelector("li.active");a&&a.removeClass("active");let r=this.el.querySelector(".tab.active");return r&&r.removeClass("active"),a=this.el.querySelectorAll(".nav li")[t.group],a&&a.addClass("active"),r=this.el.querySelectorAll(".tab")[t.group],r&&r.addClass("active"),C(t.el,t.el.offsetTop),this},title(){if(d.paused)return;let t=this.current();document.title="Now Playing..."+t.name+" - "+t.artist+" | "+A},error(){let t=this.current();t.el.removeClass("current").addClass("error"),t.error=!0,this.errnum++}},g={el:null,create(){this.el||(this.el=x(e,"div",{className:"player-info",innerHTML:(e.player.options.type==="audio"?'<div class="preview"></div>':"")+'<div class="controller"></div><div class="playlist"></div>'},"after"),f.el=this.el.querySelector(".preview"),u.el=this.el.querySelector(".playlist"),o.el=this.el.querySelector(".controller"))},hide(){let t=this.el;t.addClass("hide"),window.setTimeout(()=>{t.removeClass("show hide")},300)}},m={type:"audio",mode:"random",btns:["play-pause","music"],controls:["mode","backward","play-pause","forward","volume"],events:{"play-pause"(t){d.paused?e.player.play():e.player.pause()},music(t){g.el.hasClass("show")?g.hide():(g.el.addClass("show"),u.scroll().title())}}},h={random(t){return Math.floor(Math.random()*t)},parse(t){let a=[];return[["music.163.com.*song.*id=(\\d+)","netease","song"],["music.163.com.*album.*id=(\\d+)","netease","album"],["music.163.com.*artist.*id=(\\d+)","netease","artist"],["music.163.com.*playlist.*id=(\\d+)","netease","playlist"],["music.163.com.*discover/toplist.*id=(\\d+)","netease","playlist"],["y.qq.com.*song/(\\w+)(.html)?","tencent","song"],["y.qq.com.*album/(\\w+)(.html)?","tencent","album"],["y.qq.com.*singer/(\\w+)(.html)?","tencent","artist"],["y.qq.com.*playsquare/(\\w+)(.html)?","tencent","playlist"],["y.qq.com.*playlist/(\\w+)(.html)?","tencent","playlist"],["xiami.com.*song/(\\w+)","xiami","song"],["xiami.com.*album/(\\w+)","xiami","album"],["xiami.com.*artist/(\\w+)","xiami","artist"],["xiami.com.*collect/(\\w+)","xiami","playlist"]].forEach(r=>{let c=new RegExp(r[0]).exec(t);c!==null&&(a=[r[1],r[2],c[1]])}),a},fetch(t){let a=[];return new Promise((r,c)=>{t.forEach(i=>{let p=h.parse(i);if(p[0]){let w=JSON.stringify(p),k=M.get(w);k?(a.push(...JSON.parse(k)),r(a)):fetch(`${N.playerAPI}/meting/?server=`+p[0]+"&type="+p[1]+"&id="+p[2]+"&r="+Math.random()).then(b=>b.json()).then(b=>{M.set(w,JSON.stringify(b)),a.push(...b),r(a)}).catch(b=>{})}else a.push(i),r(a)})})},secondToTime(t){let a=p=>isNaN(p)?"00":p<10?"0"+p:""+p,r=Math.floor(t/3600),c=Math.floor((t-r*3600)/60),i=Math.floor(t-r*3600-c*60);return(r>0?[r,c,i]:[c,i]).map(a).join(":")},nameMap:{dragStart:j?"touchstart":"mousedown",dragMove:j?"touchmove":"mousemove",dragEnd:j?"touchend":"mouseup"}};d=null,e.player={_id:h.random(999999),group:!0,load(t){let a="";t&&t.length>0?this.options.rawList!==t&&(this.options.rawList=t,u.clear(),this.fetch()):(a="none",this.pause());for(let r in n.el)L(n.el[r],a);return this},fetch(){return new Promise((t,a)=>{if(u.data.length>0)t(!0);else if(this.options.rawList){let r=[];this.options.rawList.forEach((c,i)=>{r.push(new Promise((p,w)=>{let k=i,b;c.list?(this.group=!0,b=c.list):(k=0,this.group=!1,b=[c]),h.fetch(b).then(T=>{u.add(k,T),p(0)})}))}),Promise.all(r).then(()=>{t(!0)})}}).then(t=>{t&&(u.create(),o.create(),this.mode())})},mode(){let t=u.data.length;if(!t||u.errnum===t)return;let a=o.step==="next"?1:-1,r=()=>{let i=u.index+a;(i>t||i<0)&&(i=o.step==="next"?0:t-1),u.index=i},c=()=>{let i=h.random(t);u.index!==i?u.index=i:r()};switch(this.options.mode){case"random":c();break;case"order":r();break;case"loop":o.step&&r(),u.index===-1&&c();break}this.init()},switch(t){typeof t=="number"&&t!==u.index&&u.current()&&!u.current().error&&(u.index=t,this.init())},init(){let t=u.current();if(!t||t.error){this.mode();return}let a=!1;d.paused||(a=!0,this.stop()),d.setAttribute("src",t.url),d.setAttribute("title",t.name+" - "+t.artist),this.volume(M.get("_PlayerVolume")||"0.7"),this.muted(M.get("_PlayerMuted")),s.create(),this.options.type==="audio"&&f.create(),a===!0&&this.play()},play(){if(S&&S.player.pause(),u.current().error){this.mode();return}d.play().then(()=>{u.scroll()}).catch(t=>{})},pause(){d.pause(),document.title=A},stop(){d.pause(),d.currentTime=0,document.title=A},seek(t){t=Math.max(t,0),t=Math.min(t,d.duration),d.currentTime=t,s.update(t/d.duration)},muted(t){t==="muted"?(d.muted=t,M.set("_PlayerMuted",t),o.update(0)):(M.del("_PlayerMuted"),d.muted=!1,o.update(d.volume))},volume(t){isNaN(t)||(o.update(t),M.set("_PlayerVolume",t),d.volume=t)},mini(){g.hide()}};let v={el:null,data:null,index:0,create(t){let a=u.index,r=u.current().lrc,c=i=>{if(a!==u.index)return;this.data=this.parse(i);let p="";this.data.forEach((w,k)=>{p+="<p"+(k===0?' class="current"':"")+">"+w[1]+"</p>"}),this.el=x(t,"div",{className:"inner",innerHTML:p},"replace"),this.index=0};r.startsWith("http")?this.fetch(r,c):c(r)},update(t){if(this.data&&(this.index>this.data.length-1||t<this.data[this.index][0]||!this.data[this.index+1]||t>=this.data[this.index+1][0])){for(let a=0;a<this.data.length;a++)if(t>=this.data[a][0]&&(!this.data[a+1]||t<this.data[a+1][0])){this.index=a;let r=-(this.index-1);this.el.style.transform="translateY("+r+"rem)",this.el.getElementsByClassName("current")[0].removeClass("current"),this.el.getElementsByTagName("p")[a].addClass("current")}}},parse(t){if(t){t=t.replace(/([^\]^\n])\[/g,(i,p)=>p+`
[`);let a=t.split(`
`),r=[],c=a.length;for(let i=0;i<c;i++){let p=a[i].match(/\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/g),w=a[i].replace(/.*\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/g,"").replace(/<(\d{2}):(\d{2})(\.(\d{2,3}))?>/g,"").trim();if(p){let k=p.length;for(let b=0;b<k;b++){let T=/\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/.exec(p[b]),W=T[1]*60,U=parseInt(T[2]),V=T[4]?parseInt(T[4])/((T[4]+"").length===2?100:1e3):0,G=W+U+V;r.push([G,w])}}}return r=r.filter(i=>i[1]),r.sort((i,p)=>i[0]-p[0]),r}else return[]},fetch(t,a){fetch(t).then(r=>r.text()).then(r=>{a(r)}).catch(r=>{})}},y={onerror(){u.error(),e.player.mode()},ondurationchange(){d.duration!==1&&s.el.setAttribute("data-dtime",h.secondToTime(d.duration))},onloadedmetadata(){e.player.seek(0),s.el.setAttribute("data-dtime",h.secondToTime(d.duration))},onplay(){e.parentNode.addClass("playing"),J(this.getAttribute("title")),S=e},onpause(){e.parentNode.removeClass("playing"),S=null},ontimeupdate(){this.disableTimeupdate||(s.update(this.currentTime/this.duration),v.update(this.currentTime))},onended(t){e.player.mode(),e.player.play()}};return(t=>{e.player.created||(e.player.options=Object.assign(m,t),e.player.options.mode=M.get("_PlayerMode")||e.player.options.mode,n.create(),d=x(e,e.player.options.type,y),g.create(),e.parentNode.addClass(e.player.options.type),e.player.created=!0)})(l),e};E();function de(){let e=!0;window.addEventListener("DOMContentLoaded",function(){e=!1}),document.readyState==="loading"&&window.addEventListener("load",function(){e&&(window.dispatchEvent(new Event("DOMContentLoaded")),console.log("%c \u2601\uFE0Fcloudflare patch %c running(rocket & minify)","color: white; background: #ff8c00; padding: 5px 3px;","padding: 4px;border:1px solid #ff8c00"))})}var ce=(e,l,n)=>{if(n)l();else{let o=document.createElement("script");o.onload=function(s,f){(f||!o.readyState)&&(console.log("abort!"),o.onload=null,o=void 0,!f&&l&&setTimeout(l,0))},o.src=e,document.head.appendChild(o)}},ue=e=>{let{text:l,parentNode:n,id:o,className:s,type:f,src:d,dataset:u}=e,g=l||e.textContent||e.innerHTML||"";n.removeChild(e);let m=document.createElement("script");o&&(m.id=o),s&&(m.className=s),f&&(m.type=f),d&&(m.src=d,m.async=!1),u.pjax!==void 0&&(m.dataset.pjax=""),g!==""&&m.appendChild(document.createTextNode(g)),n.appendChild(m)};E();var Y=(e,l)=>{let n=N[e][l];return n.includes("http")?n:n.includes("gh")||n.includes("combine")?`https://cdn.jsdelivr.net/${n}`:n.includes("npm")?`https://cdn.jsdelivr.net/${n}`:`/${n}`},pe=(e,l,n)=>{LOCAL[e]&&ce(Y("js",e),l||function(){window[e]=!0},n||window[e])},me=(e,l)=>{window["css"+e]||LOCAL[e]&&(x(document.head,"link",{rel:"stylesheet",href:Y("css",e)}),window["css"+e]=!0)};export{se as a,C as b,M as c,J as d,le as e,ne as f,ie as g,Q as h,oe as i,de as j,ue as k,pe as l,me as m};/*! For license information please see chunk-RYWZ3MB5.js.LEGAL.txt */
