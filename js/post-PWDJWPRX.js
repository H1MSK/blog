import{a as g,b as h,d as y,g as x,i as S,l as w,m as f}from"./chunk-RYWZ3MB5.js";import{a as i,b as q,d as L,j as C,k as N,q as b}from"./chunk-IF423PAF.js";import{c as v}from"./chunk-UDRZ5ZGN.js";v(),v();var k=s=>{document.querySelector(s+" .md img")&&(f("fancybox"),f("justifiedGallery"),w("fancybox",()=>{let e=jQuery.noConflict();i.each(s+" p.gallery",t=>{let a=document.createElement("div");a.className="gallery",a.setAttribute("data-height",String(t.getAttribute("data-height")||220)),a.innerHTML=t.innerHTML.replace(/<br>/g,""),t.parentNode.insertBefore(a,t),t.remove()}),i.each(s+" .md img:not(.emoji):not(.vemoji)",t=>{let a=e(t),l=a.attr("data-src")||a.attr("src"),n=a.wrap('<a class="fancybox" href="'+l+'" itemscope itemtype="https://schema.org/ImageObject" itemprop="url"></a>').parent("a"),o,d="image-info";if(a.is("a img")||(a.data("safe-src",l),a.is(".gallery img")?d="jg-caption":n.attr("data-fancybox","default").attr("rel","default")),o=t.getAttribute("title")){n.attr("data-caption",o);let r=document.createElement("span"),c=document.createTextNode(o);r.appendChild(c),r.addClass(d),q(t,r)}}),i.each(s+" div.gallery",(t,a)=>{e(t).justifiedGallery({rowHeight:e(t).data("height")||120,rel:"gallery-"+a}).on("jg.complete",function(){e(this).find("a").each((l,n)=>{n.setAttribute("data-fancybox","gallery-"+a)})})}),e.fancybox.defaults.hash=!1,e(s+" .fancybox").fancybox({loop:!0,helpers:{overlay:{locked:!1}}})},window.jQuery))},E=()=>{if(!document.querySelector(".md"))return;k(".post.block"),document.querySelector(".post.block").oncopy=e=>{if(y(LOCAL.copyright),LOCAL.nocopy){e.preventDefault();return}let t=document.getElementById("copyright");if(window.getSelection().toString().length>30&&t){e.preventDefault();let a="# "+t.querySelector(".author").innerText,l="# "+t.querySelector(".link").innerText,n="# "+t.querySelector(".license").innerText,o=a+"<br>"+l+"<br>"+n+"<br><br>"+window.getSelection().toString().replace(/\r\n/g,"<br>"),d=a+`
`+l+`
`+n+`

`+window.getSelection().toString().replace(/\r\n/g,`
`);if(e.clipboardData)e.clipboardData.setData("text/html",o),e.clipboardData.setData("text/plain",d);else if(window.clipboardData)return window.clipboardData.setData("text",d)}},i.each("li ruby",e=>{let t=e.parentNode;e.parentNode.tagName!=="LI"&&(t=e.parentNode.parentNode),t.addClass("ruby")}),i.each("ol[start]",e=>{e.style.counterReset="counter "+parseInt(e.getAttribute("start")-1)}),i.each(".md table",e=>{L(e,{className:"table-container"})}),i.each(".highlight > .table-container",e=>{e.className="code-container"}),i.each("figure.highlight",e=>{let t=e.querySelector(".code-container"),a=e.querySelector("figcaption");e.insertAdjacentHTML("beforeend",'<div class="operation"><span class="breakline-btn"><i class="ic i-align-left"></i></span><span class="copy-btn"><i class="ic i-clipboard"></i></span><span class="fullscreen-btn"><i class="ic i-expand"></i></span></div>');let l=e.querySelector(".copy-btn");LOCAL.nocopy?l.remove():(l.addEventListener("click",r=>{let c=r.currentTarget,p="",u="";t.find("pre").forEach(m=>{u+=p+m.innerText,p=`
`}),x(u,m=>{c.querySelector(".ic").className=m?"ic i-check":"ic i-times",c.blur(),y(LOCAL.copyright)})},{passive:!0}),l.addEventListener("mouseleave",r=>{setTimeout(()=>{r.target.querySelector(".ic").className="ic i-clipboard"},1e3)})),e.querySelector(".breakline-btn").addEventListener("click",r=>{let c=r.currentTarget;e.hasClass("breakline")?(e.removeClass("breakline"),c.querySelector(".ic").className="ic i-align-left"):(e.addClass("breakline"),c.querySelector(".ic").className="ic i-align-justify")});let n=e.querySelector(".fullscreen-btn"),o=()=>{e.removeClass("fullscreen"),e.scrollTop=0,b.removeClass("fullscreen"),n.querySelector(".ic").className="ic i-expand"},d=()=>{if(e.hasClass("fullscreen")){if(o(),t&&t.find("tr").length>15){let r=t.querySelector(".show-btn");t.style.maxHeight="300px",r.removeClass("open")}h(e)}else if(e.addClass("fullscreen"),b.addClass("fullscreen"),n.querySelector(".ic").className="ic i-compress",t&&t.find("tr").length>15){let r=t.querySelector(".show-btn");t.style.maxHeight="",r.addClass("open")}};if(n.addEventListener("click",d),a&&a.addEventListener("click",d),t&&t.find("tr").length>15){t.style.maxHeight="300px",t.insertAdjacentHTML("beforeend",'<div class="show-btn"><i class="ic i-angle-down"></i></div>');let r=t.querySelector(".show-btn"),c=()=>{t.style.maxHeight="300px",r.removeClass("open")},p=()=>{t.style.maxHeight="",r.addClass("open")};r.addEventListener("click",()=>{r.hasClass("open")?(o(),c(),h(t)):p()})}}),i.each("pre.mermaid > svg",e=>{let t=e;t.style.maxWidth=""}),i.each(".reward button",e=>{e.addEventListener("click",t=>{t.preventDefault();let a=document.getElementById("qr");C(a)==="inline-flex"?g(a,0):g(a,1,()=>{N(a,"inline-flex")})})}),i.each("div.tags a",e=>{e.className=["primary","success","info","warning","danger"][Math.floor(Math.random()*5)]}),i.each(".md div.player",e=>{S(e,{type:e.getAttribute("data-type"),mode:"order",btns:[]}).player.load(JSON.parse(e.getAttribute("data-src"))).fetch()});let s=document.querySelectorAll(".show-btn .i-angle-down");if(s.length){let e=new IntersectionObserver(t=>{t.forEach(a=>{a.isIntersecting?s.forEach(l=>{l.classList.remove("stop-animation")}):s.forEach(l=>{l.classList.add("stop-animation")})})},{root:null,threshold:.5});s.forEach(t=>{e.observe(t)})}};export{E as postBeauty};/*! For license information please see post-PWDJWPRX.js.LEGAL.txt */
